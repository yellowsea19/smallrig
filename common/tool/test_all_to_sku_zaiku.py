# -*- coding: utf-8 -*-
import pymysql
import requests
from logs.log import logger
import unittest
import json,time
import jsonpath
# from jsonpath_ng import jsonpath, parse
class SKU(unittest.TestCase):

    def test_wai_cai(self,id="1689541559864897538",purchaseNo="POL2023081000001"):
        print('外采收货')
        url='http://192.168.133.223:5555/API/srm/purchaseOrder/v1/anyCalculation'
        headers = {
            'Accept': 'application/json, text/plain, */*',
            'Accept-Language': 'zh-CN,zh;q=0.9,ja;q=0.8,sq;q=0.7,ar;q=0.6,an;q=0.5',
            'Access-Token': 'eyJhbGciOiJIUzI1NiJ9.eyJ1c2VyTmFtZSI6Imh1YW5naGFpIiwidXNlcklkIjoiNTM2Iiwibmlja05hbWUiOiLpu4TmtbciLCJ0aW1lc3RhbXAiOjE2OTE0Nzg0MzczNDB9.PDqnOfpxuJTL-8pYVPskIMVLVrm6Cof3eFslz9RyvYk',
            'Connection': 'keep-alive',
            'Content-Type': 'application/json',
            'Cookie': '_SIGN_ON_token=...; NG_TRANSLATE_LANG_KEY=%22en%22',
            'Origin': 'http://192.168.133.223:5555',
            'Referer': 'http://192.168.133.223:5555/YWZT/inventory/purchase/orderNew',
            'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36',
            'User-Id': '536',
            'system-code': 'ERP',
        }

        data = {"type":1,"warehouseId":230,"purchaseOrderReq":{"id":"1689541559864897538","purchaseNo":"POL2023081000001"},"purchaseOrderProductReqList":[{"id":"1689541560783450114","purchaseId":"1689541559864897538","purchaseNo":"POL2023081000001","purchaseUnit":"个","kingdeeMaterialCode":"001.001.1329-1","productId":7051,"productCode":"001.001.1329-1","productName":"板类","productGrade":"售后","giftFlag":0,"productPurchaseQuantity":100000,"purchaseUnitPrice":123.141592,"totalPurchaseAmount":12314159.2,"taxFlag":1,"taxRate":13,"receiptQuantity":378,"meetWithRate":0.38,"finishedStatus":0,"productRemark":"","delFlag":1,"createTime":"2023-08-10 15:37:53","createBy":"黄海","updateTime":"2023-08-10 20:15:09","updateBy":"黄海","receiverQuantity":"1","warehouseQuantityReqs":[],"warehouse":{"57":"","230":""}},{"id":"1689541560783450115","purchaseId":"1689541559864897538","purchaseNo":"POL2023081000001","purchaseUnit":"个","kingdeeMaterialCode":"001.002.0041-1","productId":7053,"productCode":"001.002.0041-1","productName":"手柄","productGrade":"售后","giftFlag":0,"productPurchaseQuantity":100000,"purchaseUnitPrice":123.141592,"totalPurchaseAmount":12314159.2,"taxFlag":1,"taxRate":13,"receiptQuantity":378,"meetWithRate":0.38,"finishedStatus":0,"productRemark":"","delFlag":1,"createTime":"2023-08-10 15:37:53","createBy":"黄海","updateTime":"2023-08-10 20:15:09","updateBy":"黄海","receiverQuantity":"1","warehouseQuantityReqs":[],"warehouse":{"57":"","230":""}},{"id":"1689541560783450116","purchaseId":"1689541559864897538","purchaseNo":"POL2023081000001","purchaseUnit":"个","kingdeeMaterialCode":"001.002.0061-1","productId":7055,"productCode":"001.002.0061-1","productName":"手柄","productGrade":"售后","giftFlag":0,"productPurchaseQuantity":100000,"purchaseUnitPrice":123.141592,"totalPurchaseAmount":12314159.2,"taxFlag":1,"taxRate":13,"receiptQuantity":378,"meetWithRate":0.38,"finishedStatus":0,"productRemark":"","delFlag":1,"createTime":"2023-08-10 15:37:53","createBy":"黄海","updateTime":"2023-08-10 20:15:09","updateBy":"黄海","receiverQuantity":"1","warehouseQuantityReqs":[],"warehouse":{"57":"","230":""}},{"id":"1689541560783450117","purchaseId":"1689541559864897538","purchaseNo":"POL2023081000001","purchaseUnit":"个","kingdeeMaterialCode":"001.005.0033-1","productId":7057,"productCode":"001.005.0033-1","productName":"板类","productGrade":"售后","giftFlag":0,"productPurchaseQuantity":100000,"purchaseUnitPrice":123.141592,"totalPurchaseAmount":12314159.2,"taxFlag":1,"taxRate":13,"receiptQuantity":378,"meetWithRate":0.38,"finishedStatus":0,"productRemark":"","delFlag":1,"createTime":"2023-08-10 15:37:53","createBy":"黄海","updateTime":"2023-08-10 20:15:09","updateBy":"黄海","receiverQuantity":"1","warehouseQuantityReqs":[],"warehouse":{"57":"","230":""}},{"id":"1689541560783450118","purchaseId":"1689541559864897538","purchaseNo":"POL2023081000001","purchaseUnit":"个","kingdeeMaterialCode":"001.010.0033-1","productId":7059,"productCode":"001.010.0033-1","productName":"肩带皮质部分","productGrade":"售后","giftFlag":0,"productPurchaseQuantity":100000,"purchaseUnitPrice":123.141592,"totalPurchaseAmount":12314159.2,"taxFlag":1,"taxRate":13,"receiptQuantity":378,"meetWithRate":0.38,"finishedStatus":0,"productRemark":"","delFlag":1,"createTime":"2023-08-10 15:37:53","createBy":"黄海","updateTime":"2023-08-10 20:15:09","updateBy":"黄海","receiverQuantity":"1","warehouseQuantityReqs":[],"warehouse":{"57":"","230":""}},{"id":"1689541560783450119","purchaseId":"1689541559864897538","purchaseNo":"POL2023081000001","purchaseUnit":"个","kingdeeMaterialCode":"001.015.0006-1","productId":7061,"productCode":"001.015.0006-1","productName":"PCBA半成品","productGrade":"售后","giftFlag":0,"productPurchaseQuantity":100000,"purchaseUnitPrice":123.141592,"totalPurchaseAmount":12314159.2,"taxFlag":1,"taxRate":13,"receiptQuantity":378,"meetWithRate":0.38,"finishedStatus":0,"productRemark":"","delFlag":1,"createTime":"2023-08-10 15:37:53","createBy":"黄海","updateTime":"2023-08-10 20:15:09","updateBy":"黄海","receiverQuantity":"1","warehouseQuantityReqs":[],"warehouse":{"57":"","230":""}},{"id":"1689541560783450120","purchaseId":"1689541559864897538","purchaseNo":"POL2023081000001","purchaseUnit":"个","kingdeeMaterialCode":"002-01500-0000-002","productId":7063,"productCode":"002-01500-0000-002","productName":"阿莱定位管夹","productGrade":"售后","giftFlag":0,"productPurchaseQuantity":100000,"purchaseUnitPrice":123.141592,"totalPurchaseAmount":12314159.2,"taxFlag":1,"taxRate":13,"receiptQuantity":378,"meetWithRate":0.38,"finishedStatus":0,"productRemark":"","delFlag":1,"createTime":"2023-08-10 15:37:53","createBy":"黄海","updateTime":"2023-08-10 20:15:09","updateBy":"黄海","receiverQuantity":"1","warehouseQuantityReqs":[],"warehouse":{"57":"","230":""}},{"id":"1689541560783450121","purchaseId":"1689541559864897538","purchaseNo":"POL2023081000001","purchaseUnit":"个","kingdeeMaterialCode":"002-01500-0000-004","productId":7065,"productCode":"002-01500-0000-004","productName":"自研大力夹","productGrade":"售后","giftFlag":0,"productPurchaseQuantity":100000,"purchaseUnitPrice":123.141592,"totalPurchaseAmount":12314159.2,"taxFlag":1,"taxRate":13,"receiptQuantity":378,"meetWithRate":0.38,"finishedStatus":0,"productRemark":"","delFlag":1,"createTime":"2023-08-10 15:37:53","createBy":"黄海","updateTime":"2023-08-10 20:15:09","updateBy":"黄海","receiverQuantity":"1","warehouseQuantityReqs":[],"warehouse":{"57":"","230":""}},{"id":"1689541560783450122","purchaseId":"1689541559864897538","purchaseNo":"POL2023081000001","purchaseUnit":"个","kingdeeMaterialCode":"002-01500-0000-006","productId":7067,"productCode":"002-01500-0000-006","productName":"双轴旋转支架","productGrade":"售后","giftFlag":0,"productPurchaseQuantity":100000,"purchaseUnitPrice":123.141592,"totalPurchaseAmount":12314159.2,"taxFlag":1,"taxRate":13,"receiptQuantity":378,"meetWithRate":0.38,"finishedStatus":0,"productRemark":"","delFlag":1,"createTime":"2023-08-10 15:37:53","createBy":"黄海","updateTime":"2023-08-10 20:15:09","updateBy":"黄海","receiverQuantity":"1","warehouseQuantityReqs":[],"warehouse":{"57":"","230":""}},{"id":"1689541560783450123","purchaseId":"1689541559864897538","purchaseNo":"POL2023081000001","purchaseUnit":"个","kingdeeMaterialCode":"002-01500-0000-008","productId":7069,"productCode":"002-01500-0000-008","productName":"稳定器通用提壶手柄","productGrade":"售后","giftFlag":0,"productPurchaseQuantity":100000,"purchaseUnitPrice":123.141592,"totalPurchaseAmount":12314159.2,"taxFlag":1,"taxRate":13,"receiptQuantity":378,"meetWithRate":0.38,"finishedStatus":0,"productRemark":"","delFlag":1,"createTime":"2023-08-10 15:37:53","createBy":"黄海","updateTime":"2023-08-10 20:15:09","updateBy":"黄海","receiverQuantity":"1","warehouseQuantityReqs":[],"warehouse":{"57":"","230":""}},{"id":"1689541560783450124","purchaseId":"1689541559864897538","purchaseNo":"POL2023081000001","purchaseUnit":"个","kingdeeMaterialCode":"002-01500-0000-010","productId":7071,"productCode":"002-01500-0000-010","productName":"手柄延长件","productGrade":"售后","giftFlag":0,"productPurchaseQuantity":100000,"purchaseUnitPrice":123.141592,"totalPurchaseAmount":12314159.2,"taxFlag":1,"taxRate":13,"receiptQuantity":378,"meetWithRate":0.38,"finishedStatus":0,"productRemark":"","delFlag":1,"createTime":"2023-08-10 15:37:53","createBy":"黄海","updateTime":"2023-08-10 20:15:09","updateBy":"黄海","receiverQuantity":"1","warehouseQuantityReqs":[],"warehouse":{"57":"","230":""}},{"id":"1689541560783450125","purchaseId":"1689541559864897538","purchaseNo":"POL2023081000001","purchaseUnit":"个","kingdeeMaterialCode":"002-01500-0000-012","productId":7073,"productCode":"002-01500-0000-012","productName":"滑槽监视器支架","productGrade":"售后","giftFlag":0,"productPurchaseQuantity":100000,"purchaseUnitPrice":123.141592,"totalPurchaseAmount":12314159.2,"taxFlag":1,"taxRate":13,"receiptQuantity":378,"meetWithRate":0.38,"finishedStatus":0,"productRemark":"","delFlag":1,"createTime":"2023-08-10 15:37:53","createBy":"黄海","updateTime":"2023-08-10 20:15:09","updateBy":"黄海","receiverQuantity":"1","warehouseQuantityReqs":[],"warehouse":{"57":"","230":""}},{"id":"1689541560783450126","purchaseId":"1689541559864897538","purchaseNo":"POL2023081000001","purchaseUnit":"个","kingdeeMaterialCode":"002-01500-0000-014","productId":7075,"productCode":"002-01500-0000-014","productName":"双滑槽监视器支架","productGrade":"售后","giftFlag":0,"productPurchaseQuantity":100000,"purchaseUnitPrice":123.141592,"totalPurchaseAmount":12314159.2,"taxFlag":1,"taxRate":13,"receiptQuantity":378,"meetWithRate":0.38,"finishedStatus":0,"productRemark":"","delFlag":1,"createTime":"2023-08-10 15:37:53","createBy":"黄海","updateTime":"2023-08-10 20:15:09","updateBy":"黄海","receiverQuantity":"1","warehouseQuantityReqs":[],"warehouse":{"57":"","230":""}},{"id":"1689541560783450127","purchaseId":"1689541559864897538","purchaseNo":"POL2023081000001","purchaseUnit":"个","kingdeeMaterialCode":"002-01500-0000-016","productId":7077,"productCode":"002-01500-0000-016","productName":"相机单肩带","productGrade":"售后","giftFlag":0,"productPurchaseQuantity":100000,"purchaseUnitPrice":123.141592,"totalPurchaseAmount":12314159.2,"taxFlag":1,"taxRate":13,"receiptQuantity":378,"meetWithRate":0.38,"finishedStatus":0,"productRemark":"","delFlag":1,"createTime":"2023-08-10 15:37:53","createBy":"黄海","updateTime":"2023-08-10 20:15:09","updateBy":"黄海","receiverQuantity":"1","warehouseQuantityReqs":[],"warehouse":{"57":"","230":""}},{"id":"1689541560783450128","purchaseId":"1689541559864897538","purchaseNo":"POL2023081000001","purchaseUnit":"个","kingdeeMaterialCode":"002-01500-0000-018","productId":7079,"productCode":"002-01500-0000-018","productName":"RX100 木头手握L板","productGrade":"售后","giftFlag":0,"productPurchaseQuantity":100000,"purchaseUnitPrice":123.141592,"totalPurchaseAmount":12314159.2,"taxFlag":1,"taxRate":13,"receiptQuantity":378,"meetWithRate":0.38,"finishedStatus":0,"productRemark":"","delFlag":1,"createTime":"2023-08-10 15:37:53","createBy":"黄海","updateTime":"2023-08-10 20:15:09","updateBy":"黄海","receiverQuantity":"1","warehouseQuantityReqs":[],"warehouse":{"57":"","230":""}},{"id":"1689541560783450129","purchaseId":"1689541559864897538","purchaseNo":"POL2023081000001","purchaseUnit":"个","kingdeeMaterialCode":"002-01500-0000-020","productId":7081,"productCode":"002-01500-0000-020","productName":"滑槽转阿来定位支架","productGrade":"售后","giftFlag":0,"productPurchaseQuantity":100000,"purchaseUnitPrice":123.141592,"totalPurchaseAmount":12314159.2,"taxFlag":1,"taxRate":13,"receiptQuantity":378,"meetWithRate":0.38,"finishedStatus":0,"productRemark":"","delFlag":1,"createTime":"2023-08-10 15:37:53","createBy":"黄海","updateTime":"2023-08-10 20:15:09","updateBy":"黄海","receiverQuantity":"1","warehouseQuantityReqs":[],"warehouse":{"57":"","230":""}},{"id":"1689541560783450130","purchaseId":"1689541559864897538","purchaseNo":"POL2023081000001","purchaseUnit":"个","kingdeeMaterialCode":"002-01500-0000-022","productId":7083,"productCode":"002-01500-0000-022","productName":"相机双肩背带 PSC2639","productGrade":"售后","giftFlag":0,"productPurchaseQuantity":100000,"purchaseUnitPrice":123.141592,"totalPurchaseAmount":12314159.2,"taxFlag":1,"taxRate":13,"receiptQuantity":378,"meetWithRate":0.38,"finishedStatus":0,"productRemark":"","delFlag":1,"createTime":"2023-08-10 15:37:53","createBy":"黄海","updateTime":"2023-08-10 20:15:09","updateBy":"黄海","receiverQuantity":"1","warehouseQuantityReqs":[],"warehouse":{"57":"","230":""}},{"id":"1689541560783450131","purchaseId":"1689541559864897538","purchaseNo":"POL2023081000001","purchaseUnit":"个","kingdeeMaterialCode":"002-01500-0000-024","productId":7085,"productCode":"002-01500-0000-024","productName":"相机手腕带 PSW2398","productGrade":"售后","giftFlag":0,"productPurchaseQuantity":100000,"purchaseUnitPrice":123.141592,"totalPurchaseAmount":12314159.2,"taxFlag":1,"taxRate":13,"receiptQuantity":378,"meetWithRate":0.38,"finishedStatus":0,"productRemark":"","delFlag":1,"createTime":"2023-08-10 15:37:53","createBy":"黄海","updateTime":"2023-08-10 20:15:09","updateBy":"黄海","receiverQuantity":"1","warehouseQuantityReqs":[],"warehouse":{"57":"","230":""}},{"id":"1689541560783450132","purchaseId":"1689541559864897538","purchaseNo":"POL2023081000001","purchaseUnit":"个","kingdeeMaterialCode":"002-01500-0000-026","productId":7087,"productCode":"002-01500-0000-026","productName":"SonyA6300/6400L底板+木头手柄组合","productGrade":"售后","giftFlag":0,"productPurchaseQuantity":100000,"purchaseUnitPrice":123.141592,"totalPurchaseAmount":12314159.2,"taxFlag":1,"taxRate":13,"receiptQuantity":378,"meetWithRate":0.38,"finishedStatus":0,"productRemark":"","delFlag":1,"createTime":"2023-08-10 15:37:53","createBy":"黄海","updateTime":"2023-08-10 20:15:09","updateBy":"黄海","receiverQuantity":"1","warehouseQuantityReqs":[],"warehouse":{"57":"","230":""}},{"id":"1689541560783450133","purchaseId":"1689541559864897538","purchaseNo":"POL2023081000001","purchaseUnit":"个","kingdeeMaterialCode":"002-01500-0000-028","productId":7089,"productCode":"002-01500-0000-028","productName":"7RIII-A7III双阿卡半包cage 2236","productGrade":"售后","giftFlag":0,"productPurchaseQuantity":100000,"purchaseUnitPrice":123.141592,"totalPurchaseAmount":12314159.2,"taxFlag":1,"taxRate":13,"receiptQuantity":378,"meetWithRate":0.38,"finishedStatus":0,"productRemark":"","delFlag":1,"createTime":"2023-08-10 15:37:53","createBy":"黄海","updateTime":"2023-08-10 20:15:09","updateBy":"黄海","receiverQuantity":"1","warehouseQuantityReqs":[],"warehouse":{"57":"","230":""}},{"id":"1689541560783450134","purchaseId":"1689541559864897538","purchaseNo":"POL2023081000001","purchaseUnit":"个","kingdeeMaterialCode":"002-01500-0000-030","productId":7091,"productCode":"002-01500-0000-030","productName":"35mm长阿莱定位滑条","productGrade":"售后","giftFlag":0,"productPurchaseQuantity":100000,"purchaseUnitPrice":123.141592,"totalPurchaseAmount":12314159.2,"taxFlag":1,"taxRate":13,"receiptQuantity":378,"meetWithRate":0.38,"finishedStatus":0,"productRemark":"","delFlag":1,"createTime":"2023-08-10 15:37:53","createBy":"黄海","updateTime":"2023-08-10 20:15:09","updateBy":"黄海","receiverQuantity":"1","warehouseQuantityReqs":[],"warehouse":{"57":"","230":""}},{"id":"1689541560783450135","purchaseId":"1689541559864897538","purchaseNo":"POL2023081000001","purchaseUnit":"个","kingdeeMaterialCode":"002-01500-0000-032","productId":7093,"productCode":"002-01500-0000-032","productName":"PCBA电路板","productGrade":"售后","giftFlag":0,"productPurchaseQuantity":100000,"purchaseUnitPrice":123.141592,"totalPurchaseAmount":12314159.2,"taxFlag":1,"taxRate":13,"receiptQuantity":378,"meetWithRate":0.38,"finishedStatus":0,"productRemark":"","delFlag":1,"createTime":"2023-08-10 15:37:53","createBy":"黄海","updateTime":"2023-08-10 20:15:09","updateBy":"黄海","receiverQuantity":"1","warehouseQuantityReqs":[],"warehouse":{"57":"","230":""}},{"id":"1689541560783450136","purchaseId":"1689541559864897538","purchaseNo":"POL2023081000001","purchaseUnit":"个","kingdeeMaterialCode":"002-01500-0000-034","productId":7095,"productCode":"002-01500-0000-034","productName":"PCBA电路板","productGrade":"售后","giftFlag":0,"productPurchaseQuantity":100000,"purchaseUnitPrice":123.141592,"totalPurchaseAmount":12314159.2,"taxFlag":1,"taxRate":13,"receiptQuantity":378,"meetWithRate":0.38,"finishedStatus":0,"productRemark":"","delFlag":1,"createTime":"2023-08-10 15:37:53","createBy":"黄海","updateTime":"2023-08-10 20:15:09","updateBy":"黄海","receiverQuantity":"1","warehouseQuantityReqs":[],"warehouse":{"57":"","230":""}},{"id":"1689541560783450137","purchaseId":"1689541559864897538","purchaseNo":"POL2023081000001","purchaseUnit":"个","kingdeeMaterialCode":"002-01500-0000-036","productId":7097,"productCode":"002-01500-0000-036","productName":"富士X-T4 木头手柄L板","productGrade":"售后","giftFlag":0,"productPurchaseQuantity":100000,"purchaseUnitPrice":123.141592,"totalPurchaseAmount":12314159.2,"taxFlag":1,"taxRate":13,"receiptQuantity":378,"meetWithRate":0.38,"finishedStatus":0,"productRemark":"","delFlag":1,"createTime":"2023-08-10 15:37:53","createBy":"黄海","updateTime":"2023-08-10 20:15:09","updateBy":"黄海","receiverQuantity":"1","warehouseQuantityReqs":[],"warehouse":{"57":"","230":""}},{"id":"1689541560783450138","purchaseId":"1689541559864897538","purchaseNo":"POL2023081000001","purchaseUnit":"个","kingdeeMaterialCode":"002-01500-0000-038","productId":7099,"productCode":"002-01500-0000-038","productName":"阿莱定位销球头","productGrade":"售后","giftFlag":0,"productPurchaseQuantity":100000,"purchaseUnitPrice":123.141592,"totalPurchaseAmount":12314159.2,"taxFlag":1,"taxRate":13,"receiptQuantity":378,"meetWithRate":0.38,"finishedStatus":0,"productRemark":"","delFlag":1,"createTime":"2023-08-10 15:37:53","createBy":"黄海","updateTime":"2023-08-10 20:15:09","updateBy":"黄海","receiverQuantity":"1","warehouseQuantityReqs":[],"warehouse":{"57":"","230":""}},{"id":"1689541560783450139","purchaseId":"1689541559864897538","purchaseNo":"POL2023081000001","purchaseUnit":"个","kingdeeMaterialCode":"002-01500-0000-040","productId":7101,"productCode":"002-01500-0000-040","productName":"稳定器手持环连接管","productGrade":"售后","giftFlag":0,"productPurchaseQuantity":100000,"purchaseUnitPrice":123.141592,"totalPurchaseAmount":12314159.2,"taxFlag":1,"taxRate":13,"receiptQuantity":378,"meetWithRate":0.38,"finishedStatus":0,"productRemark":"","delFlag":1,"createTime":"2023-08-10 15:37:53","createBy":"黄海","updateTime":"2023-08-10 20:15:09","updateBy":"黄海","receiverQuantity":"1","warehouseQuantityReqs":[],"warehouse":{"57":"","230":""}},{"id":"1689541560783450140","purchaseId":"1689541559864897538","purchaseNo":"POL2023081000001","purchaseUnit":"个","kingdeeMaterialCode":"002-01500-0000-042","productId":7103,"productCode":"002-01500-0000-042","productName":"S0兔笼","productGrade":"售后","giftFlag":0,"productPurchaseQuantity":100000,"purchaseUnitPrice":123.141592,"totalPurchaseAmount":12314159.2,"taxFlag":1,"taxRate":13,"receiptQuantity":378,"meetWithRate":0.38,"finishedStatus":0,"productRemark":"","delFlag":1,"createTime":"2023-08-10 15:37:53","createBy":"黄海","updateTime":"2023-08-10 20:15:09","updateBy":"黄海","receiverQuantity":"1","warehouseQuantityReqs":[],"warehouse":{"57":"","230":""}},{"id":"1689541560783450141","purchaseId":"1689541559864897538","purchaseNo":"POL2023081000001","purchaseUnit":"个","kingdeeMaterialCode":"002-01500-0000-046","productId":7105,"productCode":"002-01500-0000-046","productName":"V型供电底座下盖板","productGrade":"售后","giftFlag":0,"productPurchaseQuantity":100000,"purchaseUnitPrice":123.141592,"totalPurchaseAmount":12314159.2,"taxFlag":1,"taxRate":13,"receiptQuantity":378,"meetWithRate":0.38,"finishedStatus":0,"productRemark":"","delFlag":1,"createTime":"2023-08-10 15:37:53","createBy":"黄海","updateTime":"2023-08-10 20:15:09","updateBy":"黄海","receiverQuantity":"1","warehouseQuantityReqs":[],"warehouse":{"57":"","230":""}},{"id":"1689541560783450142","purchaseId":"1689541559864897538","purchaseNo":"POL2023081000001","purchaseUnit":"个","kingdeeMaterialCode":"002-01500-0000-051","productId":7107,"productCode":"002-01500-0000-051","productName":"PCBA电路板","productGrade":"售后","giftFlag":0,"productPurchaseQuantity":100000,"purchaseUnitPrice":123.141592,"totalPurchaseAmount":12314159.2,"taxFlag":1,"taxRate":13,"receiptQuantity":378,"meetWithRate":0.38,"finishedStatus":0,"productRemark":"","delFlag":1,"createTime":"2023-08-10 15:37:53","createBy":"黄海","updateTime":"2023-08-10 20:15:09","updateBy":"黄海","receiverQuantity":"1","warehouseQuantityReqs":[],"warehouse":{"57":"","230":""}},{"id":"1689541560783450143","purchaseId":"1689541559864897538","purchaseNo":"POL2023081000001","purchaseUnit":"个","kingdeeMaterialCode":"002-01500-0000-053","productId":7109,"productCode":"002-01500-0000-053","productName":"SONY A 6500专用阿卡底板+木头手柄组合","productGrade":"售后","giftFlag":0,"productPurchaseQuantity":100000,"purchaseUnitPrice":123.141592,"totalPurchaseAmount":12314159.2,"taxFlag":1,"taxRate":13,"receiptQuantity":378,"meetWithRate":0.38,"finishedStatus":0,"productRemark":"","delFlag":1,"createTime":"2023-08-10 15:37:53","createBy":"黄海","updateTime":"2023-08-10 20:15:09","updateBy":"黄海","receiverQuantity":"1","warehouseQuantityReqs":[],"warehouse":{"57":"","230":""}},{"id":"1689541560783450144","purchaseId":"1689541559864897538","purchaseNo":"POL2023081000001","purchaseUnit":"个","kingdeeMaterialCode":"002-01500-0000-055","productId":7111,"productCode":"002-01500-0000-055","productName":"IPHONE X CAGE","productGrade":"售后","giftFlag":0,"productPurchaseQuantity":100000,"purchaseUnitPrice":123.141592,"totalPurchaseAmount":12314159.2,"taxFlag":1,"taxRate":13,"receiptQuantity":378,"meetWithRate":0.38,"finishedStatus":0,"productRemark":"","delFlag":1,"createTime":"2023-08-10 15:37:53","createBy":"黄海","updateTime":"2023-08-10 20:15:09","updateBy":"黄海","receiverQuantity":"1","warehouseQuantityReqs":[],"warehouse":{"57":"","230":""}},{"id":"1689541560783450145","purchaseId":"1689541559864897538","purchaseNo":"POL2023081000001","purchaseUnit":"个","kingdeeMaterialCode":"002-01500-0000-057","productId":7113,"productCode":"002-01500-0000-057","productName":"阿童木shogun7底座条","productGrade":"售后","giftFlag":0,"productPurchaseQuantity":100000,"purchaseUnitPrice":123.141592,"totalPurchaseAmount":12314159.2,"taxFlag":1,"taxRate":13,"receiptQuantity":378,"meetWithRate":0.38,"finishedStatus":0,"productRemark":"","delFlag":1,"createTime":"2023-08-10 15:37:53","createBy":"黄海","updateTime":"2023-08-10 20:15:09","updateBy":"黄海","receiverQuantity":"1","warehouseQuantityReqs":[],"warehouse":{"57":"","230":""}},{"id":"1689541560783450146","purchaseId":"1689541559864897538","purchaseNo":"POL2023081000001","purchaseUnit":"个","kingdeeMaterialCode":"002-01500-0000-059","productId":7115,"productCode":"002-01500-0000-059","productName":"直角延长件手柄","productGrade":"售后","giftFlag":0,"productPurchaseQuantity":100000,"purchaseUnitPrice":123.141592,"totalPurchaseAmount":12314159.2,"taxFlag":1,"taxRate":13,"receiptQuantity":378,"meetWithRate":0.38,"finishedStatus":0,"productRemark":"","delFlag":1,"createTime":"2023-08-10 15:37:53","createBy":"黄海","updateTime":"2023-08-10 20:15:09","updateBy":"黄海","receiverQuantity":"1","warehouseQuantityReqs":[],"warehouse":{"57":"","230":""}},{"id":"1689541560783450147","purchaseId":"1689541559864897538","purchaseNo":"POL2023081000001","purchaseUnit":"个","kingdeeMaterialCode":"002-01500-0000-061","productId":7117,"productCode":"002-01500-0000-061","productName":"ninja v 配件底板","productGrade":"售后","giftFlag":0,"productPurchaseQuantity":100000,"purchaseUnitPrice":123.141592,"totalPurchaseAmount":12314159.2,"taxFlag":1,"taxRate":13,"receiptQuantity":378,"meetWithRate":0.38,"finishedStatus":0,"productRemark":"","delFlag":1,"createTime":"2023-08-10 15:37:53","createBy":"黄海","updateTime":"2023-08-10 20:15:09","updateBy":"黄海","receiverQuantity":"1","warehouseQuantityReqs":[],"warehouse":{"57":"","230":""}},{"id":"1689541560783450148","purchaseId":"1689541559864897538","purchaseNo":"POL2023081000001","purchaseUnit":"个","kingdeeMaterialCode":"002-01500-0000-064","productId":7119,"productCode":"002-01500-0000-064","productName":"Sony ZV-L底板","productGrade":"售后","giftFlag":0,"productPurchaseQuantity":100000,"purchaseUnitPrice":123.141592,"totalPurchaseAmount":12314159.2,"taxFlag":1,"taxRate":13,"receiptQuantity":378,"meetWithRate":0.38,"finishedStatus":0,"productRemark":"","delFlag":1,"createTime":"2023-08-10 15:37:53","createBy":"黄海","updateTime":"2023-08-10 20:15:09","updateBy":"黄海","receiverQuantity":"1","warehouseQuantityReqs":[],"warehouse":{"57":"","230":""}},{"id":"1689541560783450149","purchaseId":"1689541559864897538","purchaseNo":"POL2023081000001","purchaseUnit":"个","kingdeeMaterialCode":"002-01500-0000-066","productId":7121,"productCode":"002-01500-0000-066","productName":"IPone12 PRO P组合件（四件外边框加插销）","productGrade":"售后","giftFlag":0,"productPurchaseQuantity":100000,"purchaseUnitPrice":123.141592,"totalPurchaseAmount":12314159.2,"taxFlag":1,"taxRate":13,"receiptQuantity":378,"meetWithRate":0.38,"finishedStatus":0,"productRemark":"","delFlag":1,"createTime":"2023-08-10 15:37:53","createBy":"黄海","updateTime":"2023-08-10 20:15:09","updateBy":"黄海","receiverQuantity":"1","warehouseQuantityReqs":[],"warehouse":{"57":"","230":""}},{"id":"1689541560783450150","purchaseId":"1689541559864897538","purchaseNo":"POL2023081000001","purchaseUnit":"个","kingdeeMaterialCode":"002-01500-0000-073","productId":7123,"productCode":"002-01500-0000-073","productName":"手柄","productGrade":"售后","giftFlag":0,"productPurchaseQuantity":100000,"purchaseUnitPrice":123.141592,"totalPurchaseAmount":12314159.2,"taxFlag":1,"taxRate":13,"receiptQuantity":378,"meetWithRate":0.38,"finishedStatus":0,"productRemark":"","delFlag":1,"createTime":"2023-08-10 15:37:53","createBy":"黄海","updateTime":"2023-08-10 20:15:09","updateBy":"黄海","receiverQuantity":"1","warehouseQuantityReqs":[],"warehouse":{"57":"","230":""}},{"id":"1689541560783450151","purchaseId":"1689541559864897538","purchaseNo":"POL2023081000001","purchaseUnit":"个","kingdeeMaterialCode":"002-01500-0000-075","productId":7125,"productCode":"002-01500-0000-075","productName":"齿轮手柄_左","productGrade":"售后","giftFlag":0,"productPurchaseQuantity":100000,"purchaseUnitPrice":123.141592,"totalPurchaseAmount":12314159.2,"taxFlag":1,"taxRate":13,"receiptQuantity":378,"meetWithRate":0.38,"finishedStatus":0,"productRemark":"","delFlag":1,"createTime":"2023-08-10 15:37:53","createBy":"黄海","updateTime":"2023-08-10 20:15:09","updateBy":"黄海","receiverQuantity":"1","warehouseQuantityReqs":[],"warehouse":{"57":"","230":""}},{"id":"1689541560783450152","purchaseId":"1689541559864897538","purchaseNo":"POL2023081000001","purchaseUnit":"个","kingdeeMaterialCode":"002-01500-0000-078","productId":7127,"productCode":"002-01500-0000-078","productName":"稳定器快拆母座","productGrade":"售后","giftFlag":0,"productPurchaseQuantity":100000,"purchaseUnitPrice":123.141592,"totalPurchaseAmount":12314159.2,"taxFlag":1,"taxRate":13,"receiptQuantity":378,"meetWithRate":0.38,"finishedStatus":0,"productRemark":"","delFlag":1,"createTime":"2023-08-10 15:37:53","createBy":"黄海","updateTime":"2023-08-10 20:15:09","updateBy":"黄海","receiverQuantity":"1","warehouseQuantityReqs":[],"warehouse":{"57":"","230":""}},{"id":"1689541560783450153","purchaseId":"1689541559864897538","purchaseNo":"POL2023081000001","purchaseUnit":"个","kingdeeMaterialCode":"070-3018A-M111-000","productId":7129,"productCode":"070-3018A-M111-000","productName":"基础款供电底座成品主板","productGrade":"售后","giftFlag":0,"productPurchaseQuantity":100000,"purchaseUnitPrice":123.141592,"totalPurchaseAmount":12314159.2,"taxFlag":1,"taxRate":13,"receiptQuantity":378,"meetWithRate":0.38,"finishedStatus":0,"productRemark":"","delFlag":1,"createTime":"2023-08-10 15:37:53","createBy":"黄海","updateTime":"2023-08-10 20:15:09","updateBy":"黄海","receiverQuantity":"1","warehouseQuantityReqs":[],"warehouse":{"57":"","230":""}},{"id":"1689541560783450154","purchaseId":"1689541559864897538","purchaseNo":"POL2023081000001","purchaseUnit":"个","kingdeeMaterialCode":"002-00111-3101-117","productId":7235,"productCode":"84-1008-A","productName":"B端定制管夹","productGrade":"售后","giftFlag":0,"productPurchaseQuantity":100000,"purchaseUnitPrice":123.141592,"totalPurchaseAmount":12314159.2,"taxFlag":1,"taxRate":13,"receiptQuantity":378,"meetWithRate":0.38,"finishedStatus":0,"productRemark":"","delFlag":1,"createTime":"2023-08-10 15:37:53","createBy":"黄海","updateTime":"2023-08-10 20:15:09","updateBy":"黄海","receiverQuantity":"1","warehouseQuantityReqs":[],"warehouse":{"57":"","230":""}},{"id":"1689541560783450155","purchaseId":"1689541559864897538","purchaseNo":"POL2023081000001","purchaseUnit":"个","kingdeeMaterialCode":"114A001","productId":8780,"productCode":"114A001","productName":"SmallRig Universal Clamp with Cold Shoe for LCD Monitors 1125SmallRig Universal Clamp with Cold Shoe for LCD Monitors 1125SmallR","productGrade":"","giftFlag":0,"productPurchaseQuantity":100000,"purchaseUnitPrice":123.141592,"totalPurchaseAmount":12314159.2,"taxFlag":1,"taxRate":13,"receiptQuantity":378,"meetWithRate":0.38,"finishedStatus":0,"productRemark":"","delFlag":1,"createTime":"2023-08-10 15:37:53","createBy":"黄海","updateTime":"2023-08-10 20:15:09","updateBy":"黄海","receiverQuantity":"1","warehouseQuantityReqs":[],"warehouse":{"57":"","230":""}},{"id":"1689541560783450156","purchaseId":"1689541559864897538","purchaseNo":"POL2023081000001","purchaseUnit":"个","kingdeeMaterialCode":"114A003","productId":8782,"productCode":"114A003","productName":"SmallRig旋转冷靴（单颗1/4螺丝）2935","productGrade":"","giftFlag":0,"productPurchaseQuantity":100000,"purchaseUnitPrice":123.141592,"totalPurchaseAmount":12314159.2,"taxFlag":1,"taxRate":13,"receiptQuantity":378,"meetWithRate":0.38,"finishedStatus":0,"productRemark":"","delFlag":1,"createTime":"2023-08-10 15:37:53","createBy":"黄海","updateTime":"2023-08-10 20:15:09","updateBy":"黄海","receiverQuantity":"1","warehouseQuantityReqs":[],"warehouse":{"57":"","230":""}},{"id":"1689541560783450157","purchaseId":"1689541559864897538","purchaseNo":"POL2023081000001","purchaseUnit":"个","kingdeeMaterialCode":"114A006","productId":8785,"productCode":"114A006","productName":"SmallRig旋转冷靴（单颗1/4螺丝）2935","productGrade":"","giftFlag":0,"productPurchaseQuantity":100000,"purchaseUnitPrice":123.141592,"totalPurchaseAmount":12314159.2,"taxFlag":1,"taxRate":13,"receiptQuantity":378,"meetWithRate":0.38,"finishedStatus":0,"productRemark":"","delFlag":1,"createTime":"2023-08-10 15:37:53","createBy":"黄海","updateTime":"2023-08-10 20:15:09","updateBy":"黄海","receiverQuantity":"1","warehouseQuantityReqs":[],"warehouse":{"57":"","230":""}},{"id":"1689541560783450158","purchaseId":"1689541559864897538","purchaseNo":"POL2023081000001","purchaseUnit":"个","kingdeeMaterialCode":"114AA001","productId":8800,"productCode":"114AA001","productName":"SmallRig旋转冷靴（单颗1/4螺丝）2935","productGrade":"待售","giftFlag":0,"productPurchaseQuantity":100000,"purchaseUnitPrice":123.141592,"totalPurchaseAmount":12314159.2,"taxFlag":1,"taxRate":13,"receiptQuantity":378,"meetWithRate":0.38,"finishedStatus":0,"productRemark":"","delFlag":1,"createTime":"2023-08-10 15:37:53","createBy":"黄海","updateTime":"2023-08-10 20:15:09","updateBy":"黄海","receiverQuantity":"1","warehouseQuantityReqs":[],"warehouse":{"57":"","230":""}},{"id":"1689541560783450159","purchaseId":"1689541559864897538","purchaseNo":"POL2023081000001","purchaseUnit":"个","kingdeeMaterialCode":"114AA002","productId":8801,"productCode":"114AA002","productName":"SmallRig旋转冷靴（单颗1/4螺丝）2935","productGrade":"待售","giftFlag":0,"productPurchaseQuantity":100000,"purchaseUnitPrice":123.141592,"totalPurchaseAmount":12314159.2,"taxFlag":1,"taxRate":13,"receiptQuantity":378,"meetWithRate":0.38,"finishedStatus":0,"productRemark":"","delFlag":1,"createTime":"2023-08-10 15:37:53","createBy":"黄海","updateTime":"2023-08-10 20:15:09","updateBy":"黄海","receiverQuantity":"1","warehouseQuantityReqs":[],"warehouse":{"57":"","230":""}},{"id":"1689541560783450160","purchaseId":"1689541559864897538","purchaseNo":"POL2023081000001","purchaseUnit":"个","kingdeeMaterialCode":"115A001","productId":8774,"productCode":"115A001","productName":"SmallRig Universal Clamp with Cold Shoe for LCD Monitors 1125SmallRig Universal Clamp with Cold Shoe for LCD Monitors 1125SmallR","productGrade":"","giftFlag":0,"productPurchaseQuantity":100000,"purchaseUnitPrice":123.141592,"totalPurchaseAmount":12314159.2,"taxFlag":1,"taxRate":13,"receiptQuantity":378,"meetWithRate":0.38,"finishedStatus":0,"productRemark":"","delFlag":1,"createTime":"2023-08-10 15:37:53","createBy":"黄海","updateTime":"2023-08-10 20:15:09","updateBy":"黄海","receiverQuantity":"1","warehouseQuantityReqs":[],"warehouse":{"57":"","230":""}},{"id":"1689541560783450161","purchaseId":"1689541559864897538","purchaseNo":"POL2023081000001","purchaseUnit":"个","kingdeeMaterialCode":"115A003","productId":8776,"productCode":"115A003","productName":"SmallRig旋转冷靴（单颗1/4螺丝）2935","productGrade":"","giftFlag":0,"productPurchaseQuantity":100000,"purchaseUnitPrice":123.141592,"totalPurchaseAmount":12314159.2,"taxFlag":1,"taxRate":13,"receiptQuantity":378,"meetWithRate":0.38,"finishedStatus":0,"productRemark":"","delFlag":1,"createTime":"2023-08-10 15:37:53","createBy":"黄海","updateTime":"2023-08-10 20:15:09","updateBy":"黄海","receiverQuantity":"1","warehouseQuantityReqs":[],"warehouse":{"57":"","230":""}},{"id":"1689541560783450162","purchaseId":"1689541559864897538","purchaseNo":"POL2023081000001","purchaseUnit":"个","kingdeeMaterialCode":"115A006","productId":8779,"productCode":"115A006","productName":"SmallRig旋转冷靴（单颗1/4螺丝）2935","productGrade":"","giftFlag":0,"productPurchaseQuantity":100000,"purchaseUnitPrice":123.141592,"totalPurchaseAmount":12314159.2,"taxFlag":1,"taxRate":13,"receiptQuantity":378,"meetWithRate":0.38,"finishedStatus":0,"productRemark":"","delFlag":1,"createTime":"2023-08-10 15:37:53","createBy":"黄海","updateTime":"2023-08-10 20:15:09","updateBy":"黄海","receiverQuantity":"1","warehouseQuantityReqs":[],"warehouse":{"57":"","230":""}},{"id":"1689541560783450163","purchaseId":"1689541559864897538","purchaseNo":"POL2023081000001","purchaseUnit":"个","kingdeeMaterialCode":"116A001","productId":8769,"productCode":"116A001","productName":"SmallRig Universal Clamp with Cold Shoe for LCD Monitors 1125SmallRig Universal Clamp with Cold Shoe for LCD Monitors 1125SmallR","productGrade":"","giftFlag":0,"productPurchaseQuantity":100000,"purchaseUnitPrice":123.141592,"totalPurchaseAmount":12314159.2,"taxFlag":1,"taxRate":13,"receiptQuantity":378,"meetWithRate":0.38,"finishedStatus":0,"productRemark":"","delFlag":1,"createTime":"2023-08-10 15:37:53","createBy":"黄海","updateTime":"2023-08-10 20:15:09","updateBy":"黄海","receiverQuantity":"1","warehouseQuantityReqs":[],"warehouse":{"57":"","230":""}}],"timestamp":1691670910000}

        response = requests.post(url=url, headers=headers,
                                 json=data, verify=False)
        res = response.json()
        print(res)
        return res['data']['receivingGoodsProductResps'][0]['receivingGoogsSn']


    def test_batch_confirm(self,receivingGoogsSn):
        print('确认收货')
        url = 'http://192.168.133.223:5555/API/srm/purchaseGoodsReceiving/v1/batchConfirm'

        headers = {
            'Accept': 'application/json, text/plain, */*',
            'Accept-Language': 'zh-CN,zh;q=0.9,ja;q=0.8,sq;q=0.7,ar;q=0.6,an;q=0.5',
            'Access-Token': 'eyJhbGciOiJIUzI1NiJ9.eyJ1c2VyTmFtZSI6Imh1YW5naGFpIiwidXNlcklkIjoiNTM2Iiwibmlja05hbWUiOiLpu4TmtbciLCJ0aW1lc3RhbXAiOjE2OTE0Nzg0MzczNDB9.PDqnOfpxuJTL-8pYVPskIMVLVrm6Cof3eFslz9RyvYk',
            'Connection': 'keep-alive',
            'Content-Type': 'application/json',
            'Cookie': '_SIGN_ON_token=...; NG_TRANSLATE_LANG_KEY=%22en%22',
            'Origin': 'http://192.168.133.223:5555',
            'Referer': 'http://192.168.133.223:5555/YWZT/inventory/purchase/orderNew',
            'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36',
            'User-Id': '536',
            'system-code': 'ERP',
        }
        data = {
            "receivingGoogsSns": [f'{receivingGoogsSn}'],
            "kingdeeReceiptSn": str(time.time()),
            "timestamp": 1691672311000
        }

        res = requests.post(url, headers=headers, data=json.dumps(data))
        print(res.json())

    def test_purchaseGoodsReceiving(self,receivingGoogsSn):
        #根据收货单号查询送货单号
        print('根据收货单号查询送货单号')
        url = 'http://192.168.133.223:5555/API/srm/purchaseGoodsReceiving/v1/list'
        headers = {
            'Accept': 'application/json, text/plain, */*',
            'Accept-Language': 'zh-CN,zh;q=0.9,ja;q=0.8,sq;q=0.7,ar;q=0.6,an;q=0.5',
            'Access-Token': 'eyJhbGciOiJIUzI1NiJ9.eyJ1c2VyTmFtZSI6Imh1YW5naGFpIiwidXNlcklkIjoiNTM2Iiwibmlja05hbWUiOiLpu4TmtbciLCJ0aW1lc3RhbXAiOjE2OTE0Nzg0MzczNDB9.PDqnOfpxuJTL-8pYVPskIMVLVrm6Cof3eFslz9RyvYk',
            'Connection': 'keep-alive',
            'Content-Type': 'application/json',
            'Cookie': '_SIGN_ON_token=...; NG_TRANSLATE_LANG_KEY=%22en%22',
            'Origin': 'http://192.168.133.223:5555',
            'Referer': 'http://192.168.133.223:5555/YWZT/inventory/purchase/orderNew',
            'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36',
            'User-Id': '536',
            'system-code': 'ERP',
        }
        data = {"pageSize":200,"pageNum":1,"name":receivingGoogsSn,"status":2,"timestamp":1691664530000}
        res = requests.post(url, headers=headers, data=json.dumps(data))
        print(res.text)
        res = res.json()

        return res['data']['items'][0]['sendGoogsSn']

    def test_queryPutawayPage(self,sendGoogsSn):
        #根据送货单号查询入库单ID
        print('根据送货单号查询入库单ID')
        url = 'http://192.168.133.223:5555/API/wms/DocumentsPutaway/v1/queryPutawayPage'
        headers = {
            'Accept': 'application/json, text/plain, */*',
            'Accept-Language': 'zh-CN,zh;q=0.9,ja;q=0.8,sq;q=0.7,ar;q=0.6,an;q=0.5',
            'Access-Token': 'eyJhbGciOiJIUzI1NiJ9.eyJ1c2VyTmFtZSI6Imh1YW5naGFpIiwidXNlcklkIjoiNTM2Iiwibmlja05hbWUiOiLpu4TmtbciLCJ0aW1lc3RhbXAiOjE2OTE0Nzg0MzczNDB9.PDqnOfpxuJTL-8pYVPskIMVLVrm6Cof3eFslz9RyvYk',
            'Connection': 'keep-alive',
            'Content-Type': 'application/json',
            'Cookie': '_SIGN_ON_token=...; NG_TRANSLATE_LANG_KEY=%22en%22',
            'Origin': 'http://192.168.133.223:5555',
            'Referer': 'http://192.168.133.223:5555/YWZT/inventory/purchase/orderNew',
            'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36',
            'User-Id': '536',
            'system-code': 'ERP',
        }
        data = {"pageSize":15,"pageNum":1,"timeArr":[],"beginTime":"","endTime":"","documentsNo":"","warehouseId":"","receivingNo":"","storageNo":sendGoogsSn,"kingdeeNo":"","storageType":"","canPrint":"","status":"","skuCode":"","putawayBy":""}

        res = requests.post(url, headers=headers, data=json.dumps(data))

        try:
            print(url, data)
            print(res.json())
            res = res.json()
            print("putwayid:",res['data']['records'][0]['id'])
            return  res['data']['records'][0]['id']
        except :
            time.sleep(1)
            return self.test_queryPutawayPage(sendGoogsSn)



    def test_queryPutawayDetailPage(self, putawayId):
        # 根据ID获取上架单明细
        print('根据ID获取上架单明细')
        url = 'http://192.168.133.223:5555/API/wms/documentsPutawayDetail/v1/queryPutawayDetailPage'
        headers = {
            'Accept': 'application/json, text/plain, */*',
            'Accept-Language': 'zh-CN,zh;q=0.9,ja;q=0.8,sq;q=0.7,ar;q=0.6,an;q=0.5',
            'Access-Token': 'eyJhbGciOiJIUzI1NiJ9.eyJ1c2VyTmFtZSI6Imh1YW5naGFpIiwidXNlcklkIjoiNTM2Iiwibmlja05hbWUiOiLpu4TmtbciLCJ0aW1lc3RhbXAiOjE2OTE0Nzg0MzczNDB9.PDqnOfpxuJTL-8pYVPskIMVLVrm6Cof3eFslz9RyvYk',
            'Connection': 'keep-alive',
            'Content-Type': 'application/json',
            'Cookie': '_SIGN_ON_token=...; NG_TRANSLATE_LANG_KEY=%22en%22',
            'Origin': 'http://192.168.133.223:5555',
            'Referer': 'http://192.168.133.223:5555/YWZT/inventory/purchase/orderNew',
            'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36',
            'User-Id': '536',
            'system-code': 'ERP',
        }
        data = {"pageSize":50,"pageNum":1,"putawayId":putawayId,"skuCode":""}
        res = requests.post(url, headers=headers, data=json.dumps(data))
        print(res.json())
        res = res.json()
        detail_id_list=[]
        for i in res['data']['records'] :
            # print(i['id'])
            detail_id_list.append(i['id'])
        return detail_id_list


    def test_batchPutawayDetail(self,detail_id_list):
        #批量上架
        print('批量上架')
        url = 'http://192.168.133.223:5555/API/wms/documentsPutawayDetail/v1/batchPutawayDetail'
        headers = {
            'Accept': 'application/json, text/plain, */*',
            'Accept-Language': 'zh-CN,zh;q=0.9,ja;q=0.8,sq;q=0.7,ar;q=0.6,an;q=0.5',
            'Access-Token': 'eyJhbGciOiJIUzI1NiJ9.eyJ1c2VyTmFtZSI6Imh1YW5naGFpIiwidXNlcklkIjoiNTM2Iiwibmlja05hbWUiOiLpu4TmtbciLCJ0aW1lc3RhbXAiOjE2OTE0Nzg0MzczNDB9.PDqnOfpxuJTL-8pYVPskIMVLVrm6Cof3eFslz9RyvYk',
            'Connection': 'keep-alive',
            'Content-Type': 'application/json',
            'Cookie': '_SIGN_ON_token=...; NG_TRANSLATE_LANG_KEY=%22en%22',
            'Origin': 'http://192.168.133.223:5555',
            'Referer': 'http://192.168.133.223:5555/YWZT/inventory/purchase/orderNew',
            'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36',
            'User-Id': '536',
            'system-code': 'ERP',
        }

        data = [{"detailId":"1689546661308772358","infoList":[{"goodsAllocationId":"1613157900153323522","goodsAllocationCode":"A-001","putawayNum":1,"waitPutawayNum":0}]},{"detailId":"1689546661287800835","infoList":[{"goodsAllocationId":"1613157900153323522","goodsAllocationCode":"A-001","putawayNum":1,"waitPutawayNum":0}]},{"detailId":"1689546661321355266","infoList":[{"goodsAllocationId":"1613157900153323522","goodsAllocationCode":"A-001","putawayNum":1,"waitPutawayNum":0}]},{"detailId":"1689546661304578049","infoList":[{"goodsAllocationId":"1613157900153323522","goodsAllocationCode":"A-001","putawayNum":1,"waitPutawayNum":0}]},{"detailId":"1689546661296189442","infoList":[{"goodsAllocationId":"1613157900153323522","goodsAllocationCode":"A-001","putawayNum":1,"waitPutawayNum":0}]},{"detailId":"1689546661321355265","infoList":[{"goodsAllocationId":"1613157900153323522","goodsAllocationCode":"A-001","putawayNum":1,"waitPutawayNum":0}]},{"detailId":"1689546661308772356","infoList":[{"goodsAllocationId":"1613157900153323522","goodsAllocationCode":"A-001","putawayNum":1,"waitPutawayNum":0}]},{"detailId":"1689546661312966658","infoList":[{"goodsAllocationId":"1613157900153323522","goodsAllocationCode":"A-001","putawayNum":1,"waitPutawayNum":0}]},{"detailId":"1689546661317160961","infoList":[{"goodsAllocationId":"1613157900153323522","goodsAllocationCode":"A-001","putawayNum":1,"waitPutawayNum":0}]},{"detailId":"1689546661317160962","infoList":[{"goodsAllocationId":"1613157900153323522","goodsAllocationCode":"A-001","putawayNum":1,"waitPutawayNum":0}]},{"detailId":"1689546661300383747","infoList":[{"goodsAllocationId":"1613157900153323522","goodsAllocationCode":"A-001","putawayNum":1,"waitPutawayNum":0}]},{"detailId":"1689546661287800836","infoList":[{"goodsAllocationId":"1613157900153323522","goodsAllocationCode":"A-001","putawayNum":1,"waitPutawayNum":0}]},{"detailId":"1689546661287800838","infoList":[{"goodsAllocationId":"1613157900153323522","goodsAllocationCode":"A-001","putawayNum":1,"waitPutawayNum":0}]},{"detailId":"1689546661291995138","infoList":[{"goodsAllocationId":"1613157900153323522","goodsAllocationCode":"A-001","putawayNum":1,"waitPutawayNum":0}]},{"detailId":"1689546661296189441","infoList":[{"goodsAllocationId":"1613157900153323522","goodsAllocationCode":"A-001","putawayNum":1,"waitPutawayNum":0}]},{"detailId":"1689546661279412225","infoList":[{"goodsAllocationId":"1613157900153323522","goodsAllocationCode":"A-001","putawayNum":1,"waitPutawayNum":0}]},{"detailId":"1689546661283606530","infoList":[{"goodsAllocationId":"1613157900153323522","goodsAllocationCode":"A-001","putawayNum":1,"waitPutawayNum":0}]},{"detailId":"1689546661262635010","infoList":[{"goodsAllocationId":"1613157900153323522","goodsAllocationCode":"A-001","putawayNum":1,"waitPutawayNum":0}]},{"detailId":"1689546661266829314","infoList":[{"goodsAllocationId":"1613157900153323522","goodsAllocationCode":"A-001","putawayNum":1,"waitPutawayNum":0}]},{"detailId":"1689546661271023617","infoList":[{"goodsAllocationId":"1613157900153323522","goodsAllocationCode":"A-001","putawayNum":1,"waitPutawayNum":0}]},{"detailId":"1689546661329743874","infoList":[{"goodsAllocationId":"1613157900153323522","goodsAllocationCode":"A-001","putawayNum":1,"waitPutawayNum":0}]},{"detailId":"1689546661329743876","infoList":[{"goodsAllocationId":"1613157900153323522","goodsAllocationCode":"A-001","putawayNum":1,"waitPutawayNum":0}]},{"detailId":"1689546661325549570","infoList":[{"goodsAllocationId":"1613157900153323522","goodsAllocationCode":"A-001","putawayNum":1,"waitPutawayNum":0}]},{"detailId":"1689546661325549573","infoList":[{"goodsAllocationId":"1613157900153323522","goodsAllocationCode":"A-001","putawayNum":1,"waitPutawayNum":0}]},{"detailId":"1689546661325549574","infoList":[{"goodsAllocationId":"1613157900153323522","goodsAllocationCode":"A-001","putawayNum":1,"waitPutawayNum":0}]},{"detailId":"1689546661317160963","infoList":[{"goodsAllocationId":"1613157900153323522","goodsAllocationCode":"A-001","putawayNum":1,"waitPutawayNum":0}]},{"detailId":"1689546661317160964","infoList":[{"goodsAllocationId":"1613157900153323522","goodsAllocationCode":"A-001","putawayNum":1,"waitPutawayNum":0}]},{"detailId":"1689546661308772357","infoList":[{"goodsAllocationId":"1613157900153323522","goodsAllocationCode":"A-001","putawayNum":1,"waitPutawayNum":0}]},{"detailId":"1689546661296189443","infoList":[{"goodsAllocationId":"1613157900153323522","goodsAllocationCode":"A-001","putawayNum":1,"waitPutawayNum":0}]},{"detailId":"1689546661300383746","infoList":[{"goodsAllocationId":"1613157900153323522","goodsAllocationCode":"A-001","putawayNum":1,"waitPutawayNum":0}]},{"detailId":"1689546661300383748","infoList":[{"goodsAllocationId":"1613157900153323522","goodsAllocationCode":"A-001","putawayNum":1,"waitPutawayNum":0}]},{"detailId":"1689546661287800837","infoList":[{"goodsAllocationId":"1613157900153323522","goodsAllocationCode":"A-001","putawayNum":1,"waitPutawayNum":0}]},{"detailId":"1689546661291995137","infoList":[{"goodsAllocationId":"1613157900153323522","goodsAllocationCode":"A-001","putawayNum":1,"waitPutawayNum":0}]},{"detailId":"1689546661271023618","infoList":[{"goodsAllocationId":"1613157900153323522","goodsAllocationCode":"A-001","putawayNum":1,"waitPutawayNum":0}]},{"detailId":"1689546661279412226","infoList":[{"goodsAllocationId":"1613157900153323522","goodsAllocationCode":"A-001","putawayNum":1,"waitPutawayNum":0}]},{"detailId":"1689546661283606531","infoList":[{"goodsAllocationId":"1613157900153323522","goodsAllocationCode":"A-001","putawayNum":1,"waitPutawayNum":0}]},{"detailId":"1689546661329743873","infoList":[{"goodsAllocationId":"1613157900153323522","goodsAllocationCode":"A-001","putawayNum":1,"waitPutawayNum":0}]},{"detailId":"1689546661329743875","infoList":[{"goodsAllocationId":"1613157900153323522","goodsAllocationCode":"A-001","putawayNum":1,"waitPutawayNum":0}]},{"detailId":"1689546661325549571","infoList":[{"goodsAllocationId":"1613157900153323522","goodsAllocationCode":"A-001","putawayNum":1,"waitPutawayNum":0}]},{"detailId":"1689546661325549572","infoList":[{"goodsAllocationId":"1613157900153323522","goodsAllocationCode":"A-001","putawayNum":1,"waitPutawayNum":0}]},{"detailId":"1689546661304578051","infoList":[{"goodsAllocationId":"1613157900153323522","goodsAllocationCode":"A-001","putawayNum":1,"waitPutawayNum":0}]},{"detailId":"1689546661308772354","infoList":[{"goodsAllocationId":"1613157900153323522","goodsAllocationCode":"A-001","putawayNum":1,"waitPutawayNum":0}]},{"detailId":"1689546661300383749","infoList":[{"goodsAllocationId":"1613157900153323522","goodsAllocationCode":"A-001","putawayNum":1,"waitPutawayNum":0}]},{"detailId":"1689546661321355267","infoList":[{"goodsAllocationId":"1613157900153323522","goodsAllocationCode":"A-001","putawayNum":1,"waitPutawayNum":0}]},{"detailId":"1689546661321355268","infoList":[{"goodsAllocationId":"1613157900153323522","goodsAllocationCode":"A-001","putawayNum":1,"waitPutawayNum":0}]},{"detailId":"1689546661312966657","infoList":[{"goodsAllocationId":"1613157900153323522","goodsAllocationCode":"A-001","putawayNum":1,"waitPutawayNum":0}]},{"detailId":"1689546661308772355","infoList":[{"goodsAllocationId":"1613157900153323522","goodsAllocationCode":"A-001","putawayNum":1,"waitPutawayNum":0}]},{"detailId":"1689546661317160965","infoList":[{"goodsAllocationId":"1613157900153323522","goodsAllocationCode":"A-001","putawayNum":1,"waitPutawayNum":0}]},{"detailId":"1689546661287800834","infoList":[{"goodsAllocationId":"1613157900153323522","goodsAllocationCode":"A-001","putawayNum":1,"waitPutawayNum":0}]},{"detailId":"1689546661304578050","infoList":[{"goodsAllocationId":"1613157900153323522","goodsAllocationCode":"A-001","putawayNum":1,"waitPutawayNum":0}]}]
        for i in range(len(data)):
            data[i]['detailId'] = detail_id_list[i]
        # print(data)
        res = requests.post(url = url, headers=headers, data=json.dumps(data))
        print(url,"\n",data)
        print(res.json())
        res = res.json()

    def test_002(self):
        id_list =['1689885042165264389', '1689885042156875779', '1689885042169458691', '1689885042161070087', '1689885042161070081', '1689885042169458690', '1689885042165264387', '1689885042165264391', '1689885042165264392', '1689885042165264393', '1689885042161070084', '1689885042156875780', '1689885042156875782', '1689885042156875784', '1689885042156875785', '1689885042152681476', '1689885042152681478', '1689885042148487169', '1689885042152681473', '1689885042152681474', '1689885042173652995', '1689885042173652997', '1689885042169458694', '1689885042169458697', '1689885042169458698', '1689885042165264394', '1689885042165264395', '1689885042165264388', '1689885042161070082', '1689885042161070083', '1689885042161070085', '1689885042156875781', '1689885042156875783', '1689885042152681475', '1689885042152681477', '1689885042156875777', '1689885042173652994', '1689885042173652996', '1689885042169458695', '1689885042169458696', '1689885042161070089', '1689885042161070090', '1689885042161070086', '1689885042169458692', '1689885042169458693', '1689885042165264390', '1689885042165264386', '1689885042165264396', '1689885042156875778', '1689885042161070088']
        self.test_batchPutawayDetail(id_list)

    def test_putawayConfirm(self,putawayId):
        #上架确认
        print('上架确认')
        url = 'http://192.168.133.223:5555/API/wms/documentsPutawayDetail/v1/putawayConfirm?putawayId=%s'%putawayId
        headers = {
            'Accept': 'application/json, text/plain, */*',
            'Accept-Language': 'zh-CN,zh;q=0.9,ja;q=0.8,sq;q=0.7,ar;q=0.6,an;q=0.5',
            'Access-Token': 'eyJhbGciOiJIUzI1NiJ9.eyJ1c2VyTmFtZSI6Imh1YW5naGFpIiwidXNlcklkIjoiNTM2Iiwibmlja05hbWUiOiLpu4TmtbciLCJ0aW1lc3RhbXAiOjE2OTE0Nzg0MzczNDB9.PDqnOfpxuJTL-8pYVPskIMVLVrm6Cof3eFslz9RyvYk',
            'Connection': 'keep-alive',
            'Content-Type': 'application/json',
            'Cookie': '_SIGN_ON_token=...; NG_TRANSLATE_LANG_KEY=%22en%22',
            'Origin': 'http://192.168.133.223:5555',
            'Referer': 'http://192.168.133.223:5555/YWZT/inventory/purchase/orderNew',
            'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36',
            'User-Id': '536',
            'system-code': 'ERP',
        }
        res = requests.get(url, headers=headers)
        print(res.json())




    def test_001(self):
        for k in range(100):
            #外采收货
            receivingGoogsSn = self.test_wai_cai()

            #确认收货
            self.test_batch_confirm(receivingGoogsSn)

            #查询送货单号
            sendGoogsSn = self.test_purchaseGoodsReceiving(receivingGoogsSn)

            #根据送货单号查询入库单ID
            putaway_id = self.test_queryPutawayPage(sendGoogsSn)
            print("-------------------------------",putaway_id)
            #根据ID获取上架单明细
            detail_id_list = self.test_queryPutawayDetailPage(putaway_id)
            print(detail_id_list)
            time.sleep(2)
            #批量上架
            self.test_batchPutawayDetail(detail_id_list)
            time.sleep(2)
            #上架确认
            self.test_putawayConfirm(putaway_id)
